\hypertarget{_root_signature_8cpp_source}{}\doxysection{Root\+Signature.\+cpp}
\label{_root_signature_8cpp_source}\index{C:/Project/GitRepos/DirectX/SimpleLibrary2D\_01/SimpleLibrary2D\_01/SimpleLibrary2D\_01/Engine/Graphics/RootSignature/RootSignature.cpp@{C:/Project/GitRepos/DirectX/SimpleLibrary2D\_01/SimpleLibrary2D\_01/SimpleLibrary2D\_01/Engine/Graphics/RootSignature/RootSignature.cpp}}
\mbox{\hyperlink{_root_signature_8cpp}{\mbox{[}詳解\mbox{]}}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_root_signature_8h}{RootSignature.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00003}\mbox{\hyperlink{class_root_signature_ac7e523f868fcaa15b6ef1d2d832396a4}{00003}} \mbox{\hyperlink{class_root_signature_ac7e523f868fcaa15b6ef1d2d832396a4}{RootSignature::RootSignature}}() : instance(nullptr)}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00004}00004 \{}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00006}00006 \}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00007}00007 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00008}\mbox{\hyperlink{class_root_signature_a8007fe3581f6e8dfb5e8d8fc57263000}{00008}} \mbox{\hyperlink{class_root_signature_a8007fe3581f6e8dfb5e8d8fc57263000}{RootSignature::\string~RootSignature}}()}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00009}00009 \{}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00010}00010     \textcolor{keywordflow}{if} (instance != \textcolor{keyword}{nullptr})}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00011}00011     \{}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00012}00012         instance-\/>Release();}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00013}00013     \}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00014}00014 \}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00016}\mbox{\hyperlink{class_root_signature_a8e8070de42252e0d32628730a85ffcf8}{00016}} \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_root_signature_a8e8070de42252e0d32628730a85ffcf8}{RootSignature::Initialize}}(ComPtr<ID3D12Device> device)}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00017}00017 \{}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00018}00018     \textcolor{comment}{//ディスクリプタレンジの作成}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00019}00019     D3D12\_DESCRIPTOR\_RANGE descTblRange[2] = \{\};}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00020}00020 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00021}00021     \textcolor{comment}{//テクスチャー用レジスター0番}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00022}00022     descTblRange[0].NumDescriptors = 1; \textcolor{comment}{//テクスチャ1つ}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00023}00023     descTblRange[0].RangeType = D3D12\_DESCRIPTOR\_RANGE\_TYPE\_SRV;    \textcolor{comment}{//種別はテクスチャ}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00024}00024     descTblRange[0].BaseShaderRegister = 0; \textcolor{comment}{//0番スロットから}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00025}00025     descTblRange[0].OffsetInDescriptorsFromTableStart = D3D12\_DESCRIPTOR\_RANGE\_OFFSET\_APPEND;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00027}00027     \textcolor{comment}{//定数用レジスター0番}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00028}00028     descTblRange[1].NumDescriptors = 1; \textcolor{comment}{//テクスチャ1つ}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00029}00029     descTblRange[1].RangeType = D3D12\_DESCRIPTOR\_RANGE\_TYPE\_CBV;    \textcolor{comment}{//種別は定数}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00030}00030     descTblRange[1].BaseShaderRegister = 0; \textcolor{comment}{//0番スロットから}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00031}00031     descTblRange[1].OffsetInDescriptorsFromTableStart = D3D12\_DESCRIPTOR\_RANGE\_OFFSET\_APPEND;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00034}00034     \textcolor{comment}{//ルートパラメーターの設定}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00035}00035     D3D12\_ROOT\_PARAMETER rootParam[2] = \{\};}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00036}00036     rootParam[0].ShaderVisibility = D3D12\_SHADER\_VISIBILITY\_PIXEL;  \textcolor{comment}{//ピクセルシェーダーから見える}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00037}00037     rootParam[0].ParameterType = D3D12\_ROOT\_PARAMETER\_TYPE\_DESCRIPTOR\_TABLE;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00038}00038     rootParam[0].DescriptorTable.pDescriptorRanges = \&descTblRange[0];}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00039}00039     rootParam[0].DescriptorTable.NumDescriptorRanges = 1;   \textcolor{comment}{//レンジ数}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00041}00041     rootParam[1].ShaderVisibility = D3D12\_SHADER\_VISIBILITY\_VERTEX;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00042}00042     rootParam[1].ParameterType = D3D12\_ROOT\_PARAMETER\_TYPE\_DESCRIPTOR\_TABLE;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00043}00043     rootParam[1].DescriptorTable.pDescriptorRanges = \&descTblRange[1];}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00044}00044     rootParam[1].DescriptorTable.NumDescriptorRanges = 1;   \textcolor{comment}{//レンジ数}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00046}00046     \textcolor{comment}{//サンプラーの設定}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00047}00047     D3D12\_STATIC\_SAMPLER\_DESC samplerDesc = \{\};}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00048}00048     samplerDesc.AddressU = D3D12\_TEXTURE\_ADDRESS\_MODE\_WRAP; \textcolor{comment}{//アドレッシングモードは繰り返し}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00049}00049     samplerDesc.AddressV = D3D12\_TEXTURE\_ADDRESS\_MODE\_WRAP; \textcolor{comment}{//アドレッシングモードは繰り返し}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00050}00050     samplerDesc.AddressW = D3D12\_TEXTURE\_ADDRESS\_MODE\_WRAP; \textcolor{comment}{//アドレッシングモードは繰り返し}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00051}00051     samplerDesc.BorderColor = D3D12\_STATIC\_BORDER\_COLOR\_TRANSPARENT\_BLACK;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00052}00052     samplerDesc.Filter = D3D12\_FILTER\_MIN\_MAG\_MIP\_LINEAR;   \textcolor{comment}{//線形保管}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00053}00053     samplerDesc.MaxLOD = D3D12\_FLOAT32\_MAX; \textcolor{comment}{//ミップマップ最大値}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00054}00054     samplerDesc.MinLOD = 0.0f;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00055}00055     samplerDesc.ShaderVisibility = D3D12\_SHADER\_VISIBILITY\_PIXEL;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00056}00056     samplerDesc.ComparisonFunc = D3D12\_COMPARISON\_FUNC\_NEVER;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00058}00058     D3D12\_ROOT\_SIGNATURE\_DESC rootSignatureDesc = \{\};}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00059}00059     rootSignatureDesc.Flags = D3D12\_ROOT\_SIGNATURE\_FLAG\_ALLOW\_INPUT\_ASSEMBLER\_INPUT\_LAYOUT;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00060}00060     rootSignatureDesc.pParameters = rootParam;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00061}00061     rootSignatureDesc.NumParameters = 2;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00062}00062     rootSignatureDesc.pStaticSamplers = \&samplerDesc;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00063}00063     rootSignatureDesc.NumStaticSamplers = 1;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00065}00065     ID3DBlob* blob;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00066}00066     ID3DBlob* errorBlob;}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00067}00067 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00068}00068     \textcolor{keywordflow}{if} (FAILED(D3D12SerializeRootSignature(}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00069}00069         \&rootSignatureDesc,}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00070}00070         D3D\_ROOT\_SIGNATURE\_VERSION\_1\_0,}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00071}00071         \&blob, \&errorBlob)))}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00072}00072     \{}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00073}00073         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00074}00074     \}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00076}00076     \textcolor{keywordflow}{if} (FAILED(device-\/>CreateRootSignature(}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00077}00077         0,}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00078}00078         blob-\/>GetBufferPointer(),}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00079}00079         blob-\/>GetBufferSize(),}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00080}00080         IID\_PPV\_ARGS(\&instance))))}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00081}00081     \{}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00082}00082         \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00083}00083     \}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00085}00085     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00086}00086 \}}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00087}00087 }
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00088}\mbox{\hyperlink{class_root_signature_a7709f6429b642077a693b9a6632b9aa5}{00088}} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_root_signature_a7709f6429b642077a693b9a6632b9aa5}{RootSignature::Finalize}}()}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00089}00089 \{}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00090}00090     instance-\/>Release();}
\DoxyCodeLine{\Hypertarget{_root_signature_8cpp_source_l00091}00091 \}}

\end{DoxyCode}
